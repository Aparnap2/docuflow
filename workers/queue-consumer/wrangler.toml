name = "structurize-queue-consumer"
main = "src/index.ts"
compatibility_date = "2025-12-22"

[env.production]
account_id = "your_account_id"
compatibility_date = "2025-12-22"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "structurize-db"
database_id = ""

[[queues.producers]]
queue = "structurize-ingest"
binding = "INGEST_QUEUE"

[[queues.consumers]]
queue = "structurize-ingest"
max_retries = 8
dead_letter_queue = "structurize-dlq"

[[queues.producers]]
queue = "structurize-dlq"
binding = "DLQ_QUEUE"

[vars]
PYTHON_ENGINE_URL = "https://structurize-engine.render.com/process"
PYTHON_ENGINE_SECRET = "your-python-engine-secret"
WEB_URL = "https://api.structurize.ai"
WEBHOOK_SECRET = "your-webhook-secret"