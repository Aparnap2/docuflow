name = "docuflow-consumer-local"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[env.local]
name = "docuflow-consumer-local"

# Local D1 Database
[[d1_databases]]
binding = "DB"
database_name = "docuflow-local"

# Local Vectorize Index
[[vectorize]]
binding = "VECTORIZE"
index_name = "docuflow-local"

# Local R2 Buckets
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "docuflow-local-docs"

[[r2_buckets]]
binding = "METADATA_BUCKET"
bucket_name = "docuflow-local-metadata"

# Local Queues (Consumer)
[[queues.consumers]]
queue = "docuflow-ingest"
max_batch_size = 1
max_retries = 3

[[queues.consumers]]
queue = "docuflow-events"
max_batch_size = 1
max_retries = 3

# Local AI Binding
[ai]
binding = "AI"

# Environment Variables
[vars]
ENVIRONMENT = "local"
ENGINE_URL = "http://localhost:8000"
EOF</parameter>
</execute_command>